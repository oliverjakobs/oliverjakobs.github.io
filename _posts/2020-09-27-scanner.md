---
layout: post
author: oliver
---
Introduction and Scanner.

For my ecs system in my game I needed an easy way to add new components and systems, so I decided to write a small code generation tool to do that for me.
Here is what I have done.

First I needed to decide on a syntax for script file which decides what code to generate. After some changes I managed to plan out some syntax that fits my needs.

{% highlight c linenos %}
define ECS_LOADER_H

include
{
    "Ecs/Ecs.h",
    "Components/Animator.h",
    "Components/Transform.h",
    "Components/RigidBody.h",
    "Components/Sprite.h",
    "Components/Movement.h",
    "Components/CameraController.h",
    "Components/Inventory.h",
    "Components/Interaction.h"
}

enum ComponentType
{
    [ COMPONENT_TRANSFORM,      sizeof(Transform),          NULL ],
    [ COMPONENT_RIGID_BODY,     sizeof(RigidBody),          NULL ],
    [ COMPONENT_MOVEMENT,       sizeof(Movement),           NULL ],
    [ COMPONENT_SPRITE,         sizeof(Sprite),             NULL ],
    [ COMPONENT_ANIMATOR,       sizeof(Animator),           AnimatorFree ],
    [ COMPONENT_CAMERA,         sizeof(CameraController),   NULL ],
    [ COMPONENT_INVENTORY,      sizeof(Inventory),          InventoryFree ],
    [ COMPONENT_INTERACTION,    sizeof(Interaction),        NULL ],
    [ COMPONENT_INTERACTOR,     sizeof(Interactor),         NULL ]
}

generate RegisterComponents(Ecs* ecs): ComponentType -> EcsRegisterComponent(ecs)
{% endhighlight %}

The first line specifies the include guard for the generated c-file and is mandatory. After that comes the inluce block, that indicates what files does the generated file needs.

